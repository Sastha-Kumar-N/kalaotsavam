<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Participant Details</title>
  <link rel="icon" href="title_logo.png" type="image/png">
  <link rel="stylesheet" href="participant.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

</head>
<body>
  <nav class="navbar">
    <div class="logo left-logo">
        <img src="ASBT_logo.png" alt="Left Logo" id="leftLogo">
    </div>
    <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="leaderboard.html">Leaderboard</a>
        <a href="announcement.html">Announcements</a>

    </div>
    <div class="logo right-logo">
        <img src="creatome_white.png" alt="Right Logo" id="rightLogo">
    </div>
    <div class="menu-toggle">
        <span></span>
        <span></span>
        <span></span>
    </div>
  </nav>


  
  <div class="details">
    <h1>Participant Details</h1>
  </div>

  <div class="search-section">
    <input type="text" id="searchInput" placeholder="Enter Chest Number" />
    <button id="searchBtn">Search</button>
  </div>
  <div class="result">
    <div id="results"></div>
  </div>
  
<script>
  document.addEventListener('DOMContentLoaded', function() {
      // Mobile menu toggle
      const menuToggle = document.querySelector('.menu-toggle');
      const navLinks = document.querySelector('.nav-links');
      
      menuToggle.addEventListener('click', function() {
          navLinks.classList.toggle('active');
          menuToggle.classList.toggle('active');
      });
      let lastScroll = 0;
      const navbar = document.querySelector('.navbar');
      
      window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        
        if (currentScroll <= 0) {
          // At top of page - always show navbar
          navbar.classList.remove('hidden');
          return;
        }
        
        if (currentScroll > lastScroll && !navbar.classList.contains('hidden')) {
          // Scrolling down - hide navbar
          navbar.classList.add('hidden');
        } else if (currentScroll < lastScroll && navbar.classList.contains('hidden')) {
          // Scrolling up - show navbar
          navbar.classList.remove('hidden');
        }
        
        lastScroll = currentScroll;
      });
  });

  document.addEventListener('DOMContentLoaded', function () {
    const searchBtn = document.getElementById('searchBtn');
    const searchInput = document.getElementById('searchInput');
    const resultsDiv = document.getElementById('results');
    let participants = [];

    // Fetch data on load but don't show anything yet
    fetch('event.php')
      .then(response => response.json())
      .then(data => {
        participants = data;
      })
      .catch(error => {
        console.error('Error fetching participants:', error);
      });

    searchBtn.addEventListener('click', () => {
      const chestNumber = searchInput.value.trim();
      if (!chestNumber) {
        alert('Please enter a chest number.');
        return;
      }

      const participant = participants.find(p => p.Chest_Number === chestNumber);

      resultsDiv.innerHTML = ''; // Clear previous result

      if (!participant) {
        resultsDiv.innerHTML = `<p>No participant found with chest number ${chestNumber}.</p>`;
        return;
      }

      const participantDiv = document.createElement('div');
      participantDiv.classList.add('participant');

      const events = [];
      for (let i = 1; i <= 10; i++) {
        const event = participant[`Event${i}`];
        if (event && event.trim() !== '') {
          events.push(event);
        }
      }

      const groupEvent = participant.Group_event;
      const groupParticipants = participant.group_event_Participants;

      participantDiv.innerHTML = `
        <p><strong>Name:</strong> ${participant.Name}</p>
        <p><strong>Roll Number:</strong> ${participant.Roll_Number}</p>
        <p><strong>Gender:</strong> ${participant.Gender}</p>
        <p><strong>Degree:</strong> ${participant.Degree}</p>
        <p><strong>Course:</strong> ${participant.Course}</p>
        <p><strong>Year:</strong> ${participant.Year}</p>
        ${events.length > 0 ? `<p><strong>Individual Events:</strong></p><ul>${events.map(e => `<li>${e}</li>`).join('')}</ul>` : ''}
        ${groupEvent && groupEvent.trim() !== '' ? `<p><strong>Group Event:</strong> ${groupEvent}</p>` : ''}
        ${groupParticipants && groupParticipants.trim() !== '' ? `<p><strong>Group Participants:</strong> ${groupParticipants}</p>` : ''}
      `;

      resultsDiv.appendChild(participantDiv);
    });
  });


  </script>
    
  
</body>
</html>
